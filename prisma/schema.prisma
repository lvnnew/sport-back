generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url               = env("AGR_DATABASE_URI")
}

model File {
	id	Int	@default(autoincrement())	@id
	search	String?
	originalName	String
	url	String
	mimetype	String
	s3Key	String
	eTag	String
}


model Language {
	id	String	@id
	search	String?
	title	String?
	managerLanguages	Manager[]	@relation("From-Manager.language")
}


model User {
	id	Int	@default(autoincrement())	@id
	search	String?
	lastname	String
	firstname	String
	email	String
	appLoginUsers	AppLogin[]	@relation("From-AppLogin.user")
}


model AppLogin {
	id	Int	@default(autoincrement())	@id
	search	String?
	login	String
	passwordHash	String
	userId	Int
	user	User	@relation("From-AppLogin.user", fields: [userId], references: [id])
	@@unique([login])
}


model Manager {
	id	Int	@default(autoincrement())	@id
	search	String?
	title	String?
	lastName	String
	firstName	String
	languageId	String?
	language	Language?	@relation("From-Manager.language", fields: [languageId], references: [id])
	email	String?
	unitId	Int?
	unit	Unit?	@relation("From-Manager.unit", fields: [unitId], references: [id])
	headOfUnit	Boolean?
	managerLoginManagers	ManagerLogin[]	@relation("From-ManagerLogin.manager")
	managersToRoleManagers	ManagersToRole[]	@relation("From-ManagersToRole.manager")
}


model ManagerLogin {
	id	Int	@default(autoincrement())	@id
	search	String?
	login	String
	passwordHash	String
	role	String
	emailVerified	Boolean
	initialPasswordChanged	Boolean
	locked	Boolean
	managerId	Int
	manager	Manager	@relation("From-ManagerLogin.manager", fields: [managerId], references: [id])
	@@unique([login])
}


model Role {
	id	String	@id
	search	String?
	title	String?
	hasFullAccess	Boolean?
	rolesToPermissionRoles	RolesToPermission[]	@relation("From-RolesToPermission.role")
	managersToRoleRoles	ManagersToRole[]	@relation("From-ManagersToRole.role")
}


model Permission {
	id	String	@id
	search	String?
	title	String?
	rolesToPermissionPermissions	RolesToPermission[]	@relation("From-RolesToPermission.permission")
}


model RolesToPermission {
	id	Int	@default(autoincrement())	@id
	search	String?
	roleId	String
	role	Role	@relation("From-RolesToPermission.role", fields: [roleId], references: [id])
	permissionId	String
	permission	Permission	@relation("From-RolesToPermission.permission", fields: [permissionId], references: [id])
	@@unique([roleId, permissionId])
}


model ManagersToRole {
	id	Int	@default(autoincrement())	@id
	search	String?
	managerId	Int
	manager	Manager	@relation("From-ManagersToRole.manager", fields: [managerId], references: [id])
	roleId	String
	role	Role	@relation("From-ManagersToRole.role", fields: [roleId], references: [id])
	@@unique([managerId, roleId])
}


model Stat {
	id	String	@id
	search	String?
	updated	DateTime?
	helloCount	Int?
}


model Tag {
	id	Int	@default(autoincrement())	@id
	search	String?
	comment	String?
}


model Unit {
	id	Int	@default(autoincrement())	@id
	search	String?
	title	String?
	parentId	Int?
	parent	Unit?	@relation("From-Unit.parent", fields: [parentId], references: [id])
	managerUnits	Manager[]	@relation("From-Manager.unit")
	unitParents	Unit[]	@relation("From-Unit.parent")
}
